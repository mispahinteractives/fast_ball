(()=>{"use strict";class t extends Phaser.Scene{width=null;height=null;handlerScene=null;sceneStopped=!1;constructor(){super({key:"boot"})}init(){}preload(){}create(){this.scene.stop("boot"),this.scene.launch("preload")}}class i extends Phaser.Scene{width=null;height=null;handlerScene=null;sceneStopped=!1;constructor(){super({key:"preload"})}init(){var t=document.createElement("style");document.head.appendChild(t);var i=t.sheet;i.insertRule('@font-face { font-family: "PepsiOwners_Regular"; src: url("fonts/PepsiOwners_Regular.ttf") format("truetype"); }\n',0),i.insertRule('@font-face { font-family: "PepsiOwners_Extended"; src: url("fonts/PepsiOwners_Extended.ttf") format("truetype"); }\n',0),i.insertRule('@font-face { font-family: "UberMoveMedium"; src: url("fonts/UberMoveMedium.otf") format("opentype"); }\n',0)}preload(){this.load.image("bg","assets/bg.png"),this.load.image("brown","assets/brown.png"),this.load.image("square","assets/square.png"),this.load.atlas("sheet","assets/sheet.png","assets/sheet.json"),this.load.script("webfont","lib/webfont.js"),this.load.plugin("rextagtextplugin","lib/rextagtextplugin.min.js",!0),this.load.audio("bgm_loop","sounds/bgm_loop.mp3"),this.load.audio("bonus","sounds/bonus.mp3"),this.load.audio("bounce","sounds/bounce.mp3"),this.load.audio("fail","sounds/fail.mp3"),this.load.audio("win","sounds/win.mp3"),this.canvasWidth=this.sys.game.canvas.width,this.canvasHeight=this.sys.game.canvas.height,this.width=this.game.screenBaseSize.width,this.height=this.game.screenBaseSize.height,this.sceneStopped=!1,this.load.on("progress",(t=>{})),this.load.on("complete",(()=>{}))}create(){this.firstTime=!1;let t=this;WebFont.load({custom:{families:["PepsiOwners_Regular","PepsiOwners_Extended","UberMoveMedium"]},active:function(){t.scene.stop("preload"),t.scene.launch("GameScene")}})}}class e extends Phaser.GameObjects.Container{constructor(t,i,e,s,h){super(t),this.scene=t,this.x=i,this.y=e,this.gameScene=s,this.dimensions=h,this.scene.add.existing(this),this.init()}init(){this.countValue=0,this.graphicsGrp=this.scene.add.container(0,0),this.add(this.graphicsGrp),this.graphics=this.scene.make.graphics().fillStyle(1315860,1).fillRect(this.dimensions.leftOffset,this.dimensions.topOffset,this.dimensions.actualWidth,this.dimensions.actualHeight),this.graphicsGrp.add(this.graphics),this.bg=this.scene.add.sprite(0,0,"bg").setOrigin(.5),this.add(this.bg),this.frame=this.scene.add.graphics(),this.frame.lineStyle(5,0),this.frame.strokeRoundedRect(-225,-400,450,800,50),this.add(this.frame),this.line=this.scene.add.graphics(),this.line.fillStyle(0,1),this.line.fillRect(-100,150,200,4),this.add(this.line),this.logo=this.scene.add.sprite(0,-175,"sheet","logo").setOrigin(.5).setScale(.5),this.add(this.logo),this.ctaText3=this.scene.add.text(0,250,this.scene.text.texts[0].ctaTxt3,{fontFamily:"UberMoveMedium",fontSize:40,fill:"#000000",align:"center"}),this.ctaText3.setOrigin(.5),this.add(this.ctaText3),this.count1=this.scene.add.text(0,75,this.countValue,{fontFamily:"UberMoveMedium",fontSize:35,fill:"#000000",align:"center"}),this.count1.setOrigin(.5),this.add(this.count1),this.visible=!1,this.userWon=!0}ctaClick(t){this.done||(t.disableInteractive(),this.done=!0,this.scene.time.addEvent({delay:1e4,callback:()=>{this.done=!1,t.setInteractive()}}))}show(){this.visible||(this.visible=!0,this.scene.gamePlay.score<=0?this.scene.sound.play("fail",{volume:1}):(this.scene.sound.play("win",{volume:1}),this.count1.setText(this.scene.gamePlay.score)),this.alpha=0,this.logo.alpha=0,this.ctaText3.alpha=0,this.count1.alpha=0,this.scene.tweens.add({targets:this,alpha:{from:0,to:1},ease:"Linear",duration:200,onComplete:()=>{this.scene.tweens.add({targets:this.logo,alpha:{from:0,to:1},ease:"Back.easeOut",duration:200,onComplete:()=>{this.scene.tweens.add({targets:this.logo,scale:{from:this.logo.scale,to:this.logo.scale+.1},ease:"Linear",duration:700,yoyo:!0,repeat:-1}),this.scene.tweens.add({targets:this.count1,alpha:{from:0,to:1},scale:{from:0,to:this.count1.scale},ease:"Linear",duration:200,onComplete:()=>{this.scene.tweens.add({targets:this.ctaText3,alpha:{from:0,to:1},scaleX:{from:0,to:this.ctaText3.scaleX},ease:"Linear",duration:200,onComplete:()=>{}})}})}})}}))}adjust(){this.x=this.dimensions.gameWidth/2,this.y=this.dimensions.gameHeight/2,this.bg.setScale(1);let t=this.dimensions.actualWidth/this.bg.displayWidth,i=this.dimensions.actualHeight/this.bg.displayHeight,e=Math.max(t,i);this.bg.setScale(e),this.bg.x=this.dimensions.gameWidth/2-this.x,this.bg.y=this.dimensions.gameHeight/2-this.y,this.graphics&&this.graphics.destroy(),this.graphics=this.scene.make.graphics().fillStyle(1315860,1).fillRect(this.dimensions.leftOffset-this.x,this.dimensions.topOffset-this.y,this.dimensions.actualWidth,this.dimensions.actualHeight),this.graphicsGrp.add(this.graphics)}hide(){this.scene.tweens.add({targets:this,alpha:{from:1,to:0},ease:"Linear",duration:100,onComplete:()=>{this.alpha=1,this.visible=!1}})}}const s={texts:[{ctaTxt1:"twisted by art Â© presents",ctaTxt2:"Fast Ball",ctaTxt3:"best"}]},h={gameWidth:540,gameHeight:960},a={gameWidth:960,gameHeight:540};class l extends Phaser.GameObjects.Container{constructor(t,i,e,s,h){super(t),this.scene=t,this.dimensions=h,this.x=i,this.y=e,this.gameScene=s,this.scene.add.existing(this),this.collisionCooldown=0,this.init()}init(){this.rectWidth=450,this.rectHeight=800,this.speedMultiplier=4,this.ballVelocityX=0,this.ballVelocityY=3*this.speedMultiplier,this.minX=-this.rectWidth/2,this.maxX=this.rectWidth/2,this.minY=-this.rectHeight/2,this.maxY=this.rectHeight/2,this.lineInteracted=!1,this.gameOver=!1,this.score=0,this.rectGraphics=this.scene.add.graphics(),this.rectGraphics.lineStyle(7,0,1),this.rectGraphics.strokeRoundedRect(-this.rectWidth/2,-this.rectHeight/2,this.rectWidth,this.rectHeight,50),this.add(this.rectGraphics),this.scoreText=this.scene.add.text(0,-100,this.score,{fontFamily:"UberMoveMedium",fontSize:300,fill:"#4c7f68",align:"center"}),this.scoreText.setOrigin(.5),this.add(this.scoreText),this.ball=this.scene.add.sprite(0,200,"sheet","brown"),this.ball.setOrigin(.5),this.ball.setScale(1),this.add(this.ball),this.line=this.scene.add.sprite(0,300,"sheet","line"),this.line.setOrigin(.5),this.add(this.line),this.outline=this.scene.add.sprite(0,350,"sheet","outline"),this.outline.setOrigin(.5),this.add(this.outline),this.line.setInteractive(),this.scene.input.setDraggable(this.line),this.lineInteracted=!1,this.scene.input.on("drag",((t,i,e,s)=>{if(this.scene.firstTouchEvent(this.scene),i===this.line){let t=Phaser.Math.Clamp(e,this.minX+this.line.displayWidth/2,this.maxX-this.line.displayWidth/2);this.line.x=t,this.lineInteracted=!0}})),this.emitterBallSpeed=100,this.emitter=this.scene.add.particles(0,0,"brown",{lifespan:400,scale:{start:1,end:.6},alpha:{start:.9,end:0},quantity:1,frequency:100,maxParticles:10}),this.emitter.startFollow(this.ball),this.add(this.emitter),this.staticBall=this.scene.add.sprite(-150,-250,"sheet","white"),this.staticBall.setOrigin(.5),this.add(this.staticBall),this.staticBallWidth=this.staticBall.width,this.staticBallHeight=this.staticBall.height}startGame(){this.gameStarted=!0}update(){if(!this.gameStarted)return;if(this.gameOver)return;if(this.lineInteracted&&0===this.ballVelocityX&&(this.ballVelocityX=2*this.speedMultiplier),this.ball.x+=this.ballVelocityX,this.ball.y+=this.ballVelocityY,this.ball.y+this.ball.displayHeight/2>=this.outline.y+this.outline.displayHeight/2)return void this.showFail();(this.ball.y-this.ball.displayHeight/2<=this.minY||this.ball.y+this.ball.displayHeight/2>=this.maxY)&&(this.ballVelocityY*=-1,this.triggerHitEmitter(this.ball.x,this.ball.y)),(this.ball.x-this.ball.displayWidth/2<=this.minX||this.ball.x+this.ball.displayWidth/2>=this.maxX)&&(this.ballVelocityX*=-1,this.triggerHitEmitter(this.ball.x,this.ball.y));let t=this.scene.time.now;this.checkCollisionWithLine()&&t-this.collisionCooldown>200&&(this.handleLineCollision(),this.collisionCooldown=t);let i=this.ball.x-this.staticBall.x,e=this.ball.y-this.staticBall.y;if(Math.sqrt(i*i+e*e)<this.ball.displayWidth){this.staticBall.destroy(),this.updateScore();let t=Phaser.Math.Between(this.minX+50,this.maxX-50),s=Phaser.Math.Between(this.minY+50,this.maxY-350);this.staticBall=this.scene.add.sprite(t,s,"sheet","white"),this.staticBall.setOrigin(.5),this.add(this.staticBall),this.staticBallWidth=this.staticBall.displayWidth,this.staticBallHeight=this.staticBall.displayHeight;let h=Math.atan2(e,i),a=Math.sqrt(this.ballVelocityX*this.ballVelocityX+this.ballVelocityY*this.ballVelocityY);this.ballVelocityX=Math.cos(h)*a,this.ballVelocityY=Math.sin(h)*a}}handleLineCollision(){0===this.ballVelocityX&&this.startLineMovement(),this.triggerHitEmitter(this.ball.x,this.ball.y),this.ballVelocityY*=-1}checkCollisionWithOutline(){let t=this.ball.x-this.ball.displayWidth/2,i=this.ball.x+this.ball.displayWidth/2,e=this.ball.y-this.ball.displayHeight/2,s=this.ball.y+this.ball.displayHeight/2,h=this.outline.x-this.outline.displayWidth/2,a=this.outline.x+this.outline.displayWidth/2,l=this.outline.y-this.outline.displayHeight/2,n=this.outline.y+this.outline.displayHeight/2;return i>h&&t<a&&s>l&&e<n}checkCollisionWithLine(){let t=this.ball.x-this.ball.displayWidth/2,i=this.ball.x+this.ball.displayWidth/2,e=this.ball.y-this.ball.displayHeight/2,s=this.ball.y+this.ball.displayHeight/2,h=this.line.x-this.line.displayWidth/2,a=this.line.x+this.line.displayWidth/2,l=this.line.y-this.line.displayHeight/2,n=this.line.y+this.line.displayHeight/2;return i>h&&t<a&&s>l&&e<n}startLineMovement(){this.lineMoving||(this.lineMoving=!0,console.log("line moving"),setTimeout((()=>{this.line.y-=3,this.outline.y-=3,this.lineMoving=!1}),200))}updateScore(){this.scene.sound.play("bonus",{volume:.4}),this.score+=1,this.scoreText.setText(this.score)}showFail(){this.triggerHitEmitter(this.ball.x,this.ball.y),this.gameOver=!0,console.log("FAIL! The ball has hit the bottom."),this.ballVelocityX=0,this.ballVelocityY=0,this.emitter&&this.emitter.stop(),setTimeout((()=>{this.scene.cta.show()}),500)}triggerHitEmitter(t,i){this.scene.firstTouchDetected&&this.scene.sound.play("bounce",{volume:1});let e=this.scene.add.particles(t,i,"square",{speed:80,lifespan:600,scale:{start:.8,end:.3},alpha:{start:1,end:.5},quantity:6,frequency:0,maxParticles:6,angle:{min:0,max:360},gravityY:100,collide:!0,bounce:.8});this.add(e)}}let n={};class o extends Phaser.Scene{constructor(){super("GameScene")}preload(){this.levelIndex=0,n.isPortrait!=n.fullWidth<n.fullHeight?this.switchMode(!n.isPortrait):this.switchMode(n.isPortrait);let t=window.devicePixelRatio;n.fullWidth=window.innerWidth*t,n.fullHeight=window.innerHeight*t,this.scale.displaySize.setAspectRatio(n.fullWidth/n.fullHeight),this.scale.refresh(),this.scale.lockOrientation(this.game.orientation)}create(){this.setGameScale(),document.getElementById("loader").style.visibility="hidden",this.text=s,this.superGroup=this.add.container(),this.gameGroup=this.add.container(),this.superGroup.add(this.gameGroup),this.bg=this.add.sprite(0,0,"bg").setOrigin(.5),this.gameGroup.add(this.bg),this.logo=this.add.sprite(0,0,"sheet","logo").setOrigin(.5),this.gameGroup.add(this.logo),this.gamePlay=new l(this,0,0,this,n),this.gameGroup.add(this.gamePlay),this.cta=new e(this,0,0,this,n),this.gameGroup.add(this.cta),this.gameOver=!1,this.setPositions();try{dapi.addEventListener("adResized",this.gameResized.bind(this))}catch(t){this.scale.on("resize",this.gameResized,this)}this.gameResized(),window.restart&&this.startGameplay(),this.firstTouch()}firstTouch(){this.input.on("pointerdown",this.firstTouchEvent,this)}firstTouchEvent(){this.firstTouchDetected||(this.firstTouchDetected=!0,console.log("First touch detected!"),this.bgm=this.sound.add("bgm_loop",{loop:!0,volume:1}),this.bgm.play(),this.gamePlay.startGame())}hideUI(){this.tweens.add({targets:[this.tutorial,this.gamePlay],alpha:0,ease:"Linear",duration:250})}restart(t){window.restart=!0,this.scene.restart(),this.control.hand.visible=!1}destroySounds(){this.sound.mute=!this.sound.mute}update(t,i){super.update(),this.gamePlay.update()}setGameScale(){let t=n.fullWidth/n.gameWidth,i=n.fullHeight/n.gameHeight;this.gameScale=t<i?t:i,n.actualWidth=this.game.canvas.width/this.gameScale,n.actualHeight=this.game.canvas.height/this.gameScale,n.leftOffset=-(n.actualWidth-n.gameWidth)/2,n.rightOffset=n.gameWidth-n.leftOffset,n.topOffset=-(n.actualHeight-n.gameHeight)/2,n.bottomOffset=n.gameHeight-n.topOffset}switchMode(t){n.isPortrait=t,n.isLandscape=!t;let i=h;n.isLandscape&&(i=a),n.gameWidth=i.gameWidth,n.gameHeight=i.gameHeight}gameResized(){let t=1;try{if("tiktok"!=`${PLATFORM}`)try{if(mraid){var i=mraid.getScreenSize();mraid.setResizeProperties({width:i.width,height:i.height,offsetX:0,offsetY:0}),mraid.expand()}}catch(t){}}catch(t){}void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(t=window.devicePixelRatio);try{let t=dapi.getScreenSize();n.fullWidth=t.width,n.fullHeight=t.height}catch(i){n.fullWidth=Math.ceil(window.innerWidth*t),n.fullHeight=Math.ceil(window.innerHeight*t)}n.ratio=t,this.game.canvas.width===n.fullWidth&&this.game.canvas.height===n.fullHeight||(n.isPortrait!=n.fullWidth<n.fullHeight?this.switchMode(!n.isPortrait):this.switchMode(n.isPortrait),this.game.scale.setGameSize(n.fullWidth,n.fullHeight),this.game.canvas.style.width=n.fullWidth+"px",this.game.canvas.style.height=n.fullHeight+"px",this.game.scale.updateBounds(),this.game.scale.refresh(),this.setGameScale(),this.setPositions())}setPositions(){this.superGroup.scale=this.gameScale,this.gameGroup.x=(this.game.canvas.width/this.gameScale-n.gameWidth)/2,this.gameGroup.y=(this.game.canvas.height/this.gameScale-n.gameHeight)/2,this.bg.setScale(1);let t=n.actualWidth/this.bg.displayWidth,i=n.actualHeight/this.bg.displayHeight,e=Math.max(t,i);this.bg.setScale(e),this.bg.x=n.gameWidth/2,this.bg.y=n.gameHeight/2,this.logo.x=n.gameWidth/2,this.logo.y=n.topOffset+60,this.logo.setScale(.3),this.gamePlay.x=n.gameWidth/2,this.gamePlay.y=n.gameHeight/2+50,this.cta.adjust()}offsetMouse(){return{x:this.game.input.activePointer.worldX*n.actualWidth/n.fullWidth+(n.gameWidth-n.actualWidth)/2,y:this.game.input.activePointer.worldY*n.actualHeight/n.fullHeight+(n.gameHeight-n.actualHeight)/2}}offsetWorld(t){return{x:t.x*n.actualWidth/this.game.width,y:t.y*n.actualHeight/this.game.height}}}const d=window.devicePixelRatio,r={type:Phaser.CANVAS,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,parent:"game",width:540,height:960,antialias:!1},backgroundColor:0,dom:{createContainer:!0},scene:[t,i,o],physics:{default:"matter",matter:{debug:!1}}},c=new Phaser.Game(r);c.debugMode=!0,c.embedded=!1,c.screenBaseSize={width:window.innerWidth*d,height:window.innerHeight*d},c.orientation="portrait"})();